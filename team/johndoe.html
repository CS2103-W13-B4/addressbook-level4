<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>John Doe - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>John Doe - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-addressbook-level-4"><a class="link" href="#project-addressbook-level-4">Project: AddressBook - Level 4</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>AddressBook - Level 4 is a desktop address book application used for teaching Software Engineering principles. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 6 kLoC.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [<a href="https://github.com">Functional code</a>] [<a href="https://github.com">Test code</a>] {give links to collated code files}</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-undo-redo"><a class="link" href="#enhancement-added-undo-redo">Enhancement Added: Undo/Redo</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="undoing-previous-command-code-undo-code"><a class="link" href="#undoing-previous-command-code-undo-code">Undoing previous command : <code>undo</code></a></h3>
<div class="paragraph">
<p>The <code>undo</code> command will restore the list to the state before the previous undoable command was executed.<br></p>
</div>
<div class="paragraph">
<p>Command format in command box: <code>undo</code><br></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Undoing previous command is not allowed once you have switched the list mode.<br>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Valid examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>module list mode</strong>, type <code>delete 1</code> to remove the module at index 1.<br>
Next, type <code>undo</code> to restore the state of the list before <code>delete 1</code> was executed.<br></p>
</li>
<li>
<p>In <strong>module list mode</strong>, type <code>clear</code> to remove all registered modules in ModU.<br>
Next, type <code>undo</code> to restore the state of the list before <code>clear</code> was executed.<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Invalid examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>module list mode</strong>, type <code>delete 1</code> to remove the module at index 1.<br>
Next, type <code>view 1</code> to go into <strong>lesson list mode</strong> of module at index 1.<br>
Type <code>undo</code> in the command box.<br>
The <code>undo</code> command fails because the list mode has changed from <strong>module list mode</strong> to <strong>lesson list mode</strong>.<br></p>
</li>
<li>
<p>In <strong>module list mode</strong>, type <code>select 1</code> to display all the remarks of the module at index 1.<br>
Next, type <code>undo</code> in the command box.<br>
The <code>undo</code> command fails as there are no undoable commands executed previously.<br></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="redoing-the-previously-undone-command-code-redo-code"><a class="link" href="#redoing-the-previously-undone-command-code-redo-code">Redoing the previously undone command : <code>redo</code></a></h3>
<div class="paragraph">
<p>The <code>redo</code> command will reverse the most recent <code>undo</code> command. The command is not redoable.<br></p>
</div>
<div class="paragraph">
<p>Command format in command box: <code>redo</code><br></p>
</div>
<div class="paragraph">
<p>Valid examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>module list mode</strong>, type <code>delete 1</code> to remove the module at index 1.<br>
Next, type <code>undo</code> to restore the state of the list before <code>delete 1</code> was executed.<br>
Type <code>redo</code> to re-execute <code>delete 1</code>.<br></p>
</li>
<li>
<p>In <strong>module list mode</strong>, type <code>delete 1</code> to remove the module at index 1.<br>
Next, type <code>clear</code> to remove all the modules.<br>
Type <code>undo</code> to restore the state of the list before <code>clear</code> was executed.<br>
Type <code>undo</code> to restore the state of the list before <code>delete 1</code> was executed.<br>
Type <code>redo</code> to re-execute <code>delete 1</code>.<br>
Type <code>redo</code> to re-execute <code>clear</code>.<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Invalid example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>lesson list mode</strong>, type <code>delete 1</code> to remove the module at index 1.<br>
Next, type <code>redo</code> in the command box.<br>
The <code>redo</code> command fails as there are no <code>undo</code> commands executed previously.<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>{Justify the need for, and the current design (i.e. external behavior) of, the feature}</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="undo-redo-mechanism"><a class="link" href="#undo-redo-mechanism">Undo/Redo mechanism</a></h3>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by an <strong>UndoRedoStack</strong>, which resides in <strong>LogicManager</strong>. It supports undoing and redoing of commands that modify the state of ModU (e.g. add, edit). Such commands will inherit from <strong>UndoableCommand</strong>.</p>
</div>
<div class="paragraph">
<p><strong>UndoRedoStack</strong> only deals with <strong>UndoableCommands</strong>. Commands that cannot be undone will inherit from <strong>Command</strong> instead. The following diagram shows the <em>Inheritance Diagram (Figure 11)</em> for commands.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 11: Inheritance Diagram of Commands in the Logic Component</em></p>
</div>
<div class="paragraph">
<p>As you can see from the diagram, <strong>UndoableCommand</strong> adds an extra layer between the abstract <strong>Command</strong> class and concrete <strong>Commands</strong> that can be undone, such as the <strong>AddCommand</strong>. Note that extra tasks need to be done when executing a command in an undoable way, such as saving the state of ModU before execution.</p>
</div>
<div class="paragraph">
<p><strong>UndoableCommand</strong> contains the high-level algorithm for those extra tasks while the child classes implement the details of how to execute the specific command. Note that this technique of putting the high-level algorithm in the parent class and lower-level steps of the algorithm in child classes is also known as the template pattern.</p>
</div>
<div class="paragraph">
<p><strong>Commands</strong> that are not undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ListCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... list logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the extra layer, the commands that are undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">UndoableCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... undo logic ...</span>

        executeUndoableCommand();
    }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">DeleteCommand</span> <span class="directive">extends</span> UndoableCommand {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult executeUndoableCommand() {
        <span class="comment">// ... delete logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose that the user has just launched the application. The <strong>UndoRedoStack</strong> will be empty at the beginning.</p>
</div>
<div class="paragraph">
<p>The user executes a new UndoableCommand, delete 5, to delete all lessons associated with the module in index 5. The current state of ModU is saved before executing the command. The command will then be pushed onto the undoStack (the current state is saved together with the command) (Figure 12).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoStartingStackDiagram.png" alt="UndoRedoStartingStackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 12: undoStack Diagram 1</em></p>
</div>
<div class="paragraph">
<p>As the user continues to use the program, more commands are pushed onto the <strong>undoStack</strong>. For example, the user may execute add m/CS2103T â€¦ to add a new lesson <em>(Figure 13)</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand1StackDiagram.png" alt="UndoRedoNewCommand1StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 13: undoStack Diagram 2</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not be pushed onto the <strong>UndoRedoStack</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Suppose that the user now decides that adding the lesson was a mistake, and wants to undo that action using undo.</p>
</div>
<div class="paragraph">
<p>We will pop the most recent command out of the undoStack, and check if the command is redoable (a command is redoable if the listing panel has not been changed). For example, delete 5 has different meaning when listing by module and location, and thus redoing the command is no longer allowed. However, if the listing element has not been changed, we will push it back to the redoStack. We will restore ModU to the state before the add command was executed <em>(Figure 14)</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoExecuteUndoStackDiagram.png" alt="UndoRedoExecuteUndoStackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 14: undoStack Diagram 3</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <strong>undoStack</strong> is empty, then there are no other commands left to be undone, and an exception will be thrown when trying to pop from the undoStack.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following <em><a href="#sequence-diagram">Sequence diagram</a> (Figure 15)</em> shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoSequenceDiagram.png" alt="UndoRedoSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 15: Sequence Diagram for undo operation</em></p>
</div>
<div class="paragraph">
<p>The redo command does the exact opposite (pops from <strong>redoStack</strong>, push to <strong>undoStack</strong>, and restores ModU to the state after the command is executed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <strong>redoStack</strong> is empty, then there are no other commands left to redo. In this case, an exception will be thrown when trying to pop from the <strong>redoStack</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides to execute a new command, clear. As before, clear will be pushed onto the <strong>undoStack</strong>. This time, the <strong>undoStack</strong> is no longer empty. It will be purged as it no longer make sense to redo the <code>add m/MA1101R command</code> (this is the behaviour that most modern desktop applications follow) (<em>Figure 16</em>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand2StackDiagram.png" alt="UndoRedoNewCommand2StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 16: RedoStack Diagram 4</em></p>
</div>
<div class="paragraph">
<p><strong>Commands</strong> that are not undoable are not pushed onto the <strong>undoStack</strong>. For example, list, which inherits from <strong>Command</strong> rather than <strong>UndoableCommand</strong>, will not be pushed onto the <strong>undoStack</strong> after execution (<em>Figure 17</em>):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand3StackDiagram.png" alt="UndoRedoNewCommand3StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 17: RedoStack Diagram 5</em></p>
</div>
<div class="paragraph">
<p>Suppose now user wants to view all lessons of module code CS2103, thus user types command view 1 (Suppose the index of module CS2103 is 1), command view will change the listing element from <strong>MODULE</strong> to <strong>LESSON</strong>. The <strong>undoStack</strong> will then be cleared because the user can only undo if the listing element type has not been switched <em>(Figure 18)</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand4StackDiagram.png" alt="UndoRedoNewCommand4StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 18: RedoStack Diagram 6</em></p>
</div>
<div class="paragraph">
<p>The following <em>Activity Diagram (Figure 19)</em> summarizes what happens inside the <strong>UndoRedoStack</strong> when a user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoActivityDiagram.png" alt="UndoRedoActivityDiagram" width="200">
</div>
</div>
<div class="paragraph">
<p><em>Figure 19: Activity Diagram</em></p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect</strong>: Implementation of <strong>UndoableCommand</strong><br>
<strong>Alternative 1 (current choice)</strong>: Add a new abstract method <strong>executeUndoableCommand()</strong>.<br>
<strong>Pros</strong>: This implementation allows us to not lose any undo/redo functionality as it is now part of the default behaviour. Classes that deal with <strong>Command</strong> do not have to know that <strong>executeUndoableCommand()</strong> exists.<br>
<strong>Cons</strong>: It would be difficult for new developers to understand the template pattern.<br>
<strong>Alternative 2</strong>: Override <strong>execute()</strong> method.<br>
<strong>Pros</strong>: This implementation does not involve the template pattern which makes it easier for new developers to understand.<br>
<strong>Cons</strong>: Classes which inherit from <strong>UndoableCommand</strong> must remember to call <strong>super.execute()</strong>, or risk losing the ability to undo/redo.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect</strong>: How undo &amp; redo executes<br>
<strong>Alternative 1 (current choice)</strong>: Save the current state of ModU.<br>
<strong>Pros</strong>: This implementation requires less effort.<br>
<strong>Cons</strong>: It may have performance issues in terms of memory usage.<br>
<strong>Alternative 2</strong>: Undo/redo are executed by individual commands.<br>
<strong>Pros</strong>: This implementation will use less memory.<br>
<strong>Cons</strong>: We must ensure that the implementation of each individual command is correct.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect</strong>: Type of commands that can be undone/redone+
<strong>Alternative 1 (current choice)</strong>: Include only commands that modifies the data in ModU (add, clear, edit).<br>
<strong>Pros</strong>: We only revert changes that are difficult to change back (the view can easily be re-modified as no data are lost).<br>
<strong>Cons</strong>: User might think that undo also applies when the list is modified (undoing filtering for example), only to realize that it does not do that, after executing undo.<br>
<strong>Alternative 2</strong>: Include all commands.<br>
<strong>Pros</strong>: This implementation might be more intuitive for the user.<br>
<strong>Cons</strong>: User could not skip such commands if he or she just wants to reset the state of ModU and not the view mode.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect</strong>: Data structure to support the undo/redo commands<br>
<strong>Alternative 1 (current choice)</strong>: Use separate stack for undo/redo.<br>
<strong>Pros</strong>: This implementation makes it easy for developers who are taking over this application to understand.<br>
<strong>Cons</strong>: The Logic component is duplicated twice. For example, when a new command is executed, we must remember to update both <strong>HistoryManager</strong> and <strong>UndoRedoStack</strong>.<br>
<strong>Alternative 2</strong>: Use <strong>HistoryManager</strong> for undo/redo.<br>
<strong>Pros</strong>: This implementation does not require maintaining a separate stack, thus allowing us to reuse existing codes in the codebase.<br>
<strong>Cons</strong>: It would require dealing with commands that have already been undone and we must remember to skip these commands. It also violates Single Responsibility Principle and Separation of Concerns as HistoryManager now needs to do two things.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-proposed-add-command-code-remark-code"><a class="link" href="#enhancement-proposed-add-command-code-remark-code">Enhancement Proposed: Add command <code>remark</code></a></h3>
<div class="paragraph">
<p>{Explain similar to the Undo/Redo feature above.}</p>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="ulist">
<ul>
<li>
<p>Updated the GUI color scheme (Pull requests <a href="https://github.com">#33</a>, <a href="https://github.com">#34</a>)</p>
</li>
<li>
<p>Wrote additional tests to increase coverage from 88% to 92% (Pull requests <a href="https://github.com">#36</a>, <a href="https://github.com">#38</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-powerpointlabs"><a class="link" href="#project-powerpointlabs">Project: PowerPointLabs</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>{Optionally (not graded), you may include other projects in your portfolio.}</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-12 02:33:34 +00:00
</div>
</div>
</body>
</html>